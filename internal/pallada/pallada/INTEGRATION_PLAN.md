# –ü–ª–∞–Ω –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Pallada VM –≤ Cerera

## üìä –û–ë–©–ê–Ø –ö–ê–†–¢–ò–ù–ê –ü–†–û–ï–ö–¢–ê

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Cerera
- **–ë–ª–æ–∫—á–µ–π–Ω**: PoW –∫–æ–Ω—Å–µ–Ω—Å—É—Å (Gigea), –º–∞–π–Ω–∏–Ω–≥, –≤–∞–ª–∏–¥–∞—Ü–∏—è
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: Vault (D5) - —Ö—Ä–∞–Ω–∏—Ç StateAccount —Å –±–∞–ª–∞–Ω—Å–∞–º–∏
- **–¢—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: LegacyTxType, CoinbaseTxType, FaucetTxType, AppTxType, ApiTxtype
- **–í–∞–ª–∏–¥–∞—Ü–∏—è**: CoreValidator.ExecuteTransaction() - –≤—ã–ø–æ–ª–Ω—è–µ—Ç —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–°–µ—Ç—å**: IceNet (P2P), Mesh (DHT)

### –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ –ü—Ä–æ—Å—Ç—ã–µ –ø–µ—Ä–µ–≤–æ–¥—ã (LegacyTxType)
- ‚úÖ Faucet —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ Coinbase —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ **–í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤/–±–∞–π—Ç–∫–æ–¥–∞** - **–ü–û–õ–ù–û–°–¢–¨–Æ –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û**
- ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥–∞–∑–∞ –¥–ª—è VM** - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚úÖ **–•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤** - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚úÖ **Storage –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤** - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

---

## ‚úÖ –°–ò–õ–¨–ù–´–ï –ú–ï–°–¢–ê

### 1. **–ì–æ—Ç–æ–≤–∞—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å –ø–æ–ª—è–º–∏ `Data` –∏ `Payload` (–º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –±–∞–π—Ç–∫–æ–¥–∞)
- ‚úÖ StateAccount –∏–º–µ–µ—Ç –ø–æ–ª–µ `CodeHash []byte` (–º–æ–∂–Ω–æ —Ö—Ä–∞–Ω–∏—Ç—å —Ö–µ—à –∫–æ–¥–∞)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–∞–∑–∞ —É–∂–µ –µ—Å—Ç—å (Gas, GasPrice –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö)
- ‚úÖ Vault –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è –∞–∫–∫–∞—É–Ω—Ç–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ç–æ—Ä —Å –º–µ—Ç–æ–¥–æ–º ExecuteTransaction

### 2. **–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**
- ‚úÖ –ú–æ–¥—É–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ (validator, chain, storage)
- ‚úÖ Service Registry –¥–ª—è —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Å–µ—Ä–≤–∏—Å–æ–≤
- ‚úÖ –¢–∏–ø–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (TxData interface)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä–∞–∑–Ω—ã—Ö —Ç–∏–ø–æ–≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

### 3. **Pallada VM**
- ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–∞–±–æ—á–∞—è —Å—Ç–µ–∫–æ–≤–∞—è VM
- ‚úÖ 30+ –æ–ø–∫–æ–¥–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
- ‚úÖ –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ
- ‚úÖ –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- ‚úÖ 256-–±–∏—Ç–Ω—ã–µ —Å–ª–æ–≤–∞ (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å big.Int)

---

## ‚ö†Ô∏è –°–õ–ê–ë–´–ï –ú–ï–°–¢–ê / –ü–†–û–ë–õ–ï–ú–´

### 1. **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ —Å–∏—Å—Ç–µ–º—ã –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤** (—á–∞—Å—Ç–∏—á–Ω–æ —Ä–µ—à–µ–Ω–æ)
- ‚úÖ –ù–µ—Ç —Ö—Ä–∞–Ω–µ–Ω–∏—è –±–∞–π—Ç–∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (—Ç–æ–ª—å–∫–æ CodeHash) - **–†–ï–®–ï–ù–û: –¥–æ–±–∞–≤–ª–µ–Ω–æ StoreContractCode/GetContractCode**
- ‚ö†Ô∏è –ù–µ—Ç —Ä–∞–∑–ª–∏—á–µ–Ω–∏—è –º–µ–∂–¥—É –æ–±—ã—á–Ω—ã–º–∏ –∞–∫–∫–∞—É–Ω—Ç–∞–º–∏ –∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ - **CodeHash —É–∫–∞–∑—ã–≤–∞–µ—Ç –Ω–∞ –Ω–∞–ª–∏—á–∏–µ –∫–æ–¥–∞**
- ‚ùå –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CREATE) - **–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –≠–¢–ê–ü 5**
- ‚ùå –ù–µ—Ç –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CALL) - **–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –≠–¢–ê–ü 6**

### 2. **–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≥–∞–∑–∞** (—Ä–µ—à–µ–Ω–æ)
- ‚úÖ –ì–∞–∑ –µ—Å—Ç—å –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è—Ö, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è VM - **–†–ï–®–ï–ù–û: GasMeter —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω**
- ‚úÖ –ù–µ—Ç –ø–æ–¥—Å—á–µ—Ç–∞ —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ä–∞—Å—Ö–æ–¥–∞ –≥–∞–∑–∞ –ø—Ä–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–∏ - **–†–ï–®–ï–ù–û: UseGas –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏**
- ‚úÖ –ù–µ—Ç —Å–∏—Å—Ç–µ–º—ã –ª–∏–º–∏—Ç–æ–≤ –≥–∞–∑–∞ –¥–ª—è VM - **–†–ï–®–ï–ù–û: GasLimit –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ UseGas**

### 3. **–•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤** (—Ä–µ—à–µ–Ω–æ)
- ‚úÖ StateAccount.CodeHash —Ö—Ä–∞–Ω–∏—Ç —Ç–æ–ª—å–∫–æ —Ö–µ—à, –Ω–µ —Å–∞–º –∫–æ–¥ - **–†–ï–®–ï–ù–û: –∫–æ–¥ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ pogreb**
- ‚úÖ –ù–µ—Ç –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞ –¥–ª—è –±–∞–π—Ç–∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - **–†–ï–®–ï–ù–û: —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –≤ Vault**
- ‚úÖ –ù–µ—Ç –º–µ—Ö–∞–Ω–∏–∑–º–∞ –∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø–æ –∞–¥—Ä–µ—Å—É - **–†–ï–®–ï–ù–û: GetContractCode**

### 4. **–ö–æ–Ω—Ç–µ–∫—Å—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è** (—Ä–µ—à–µ–Ω–æ)
- ‚úÖ VM –Ω–µ –∏–º–µ–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫:
  - ‚úÖ –ê–¥—Ä–µ—Å—É –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ (Caller) - **–†–ï–®–ï–ù–û: Context.Caller**
  - ‚úÖ –ê–¥—Ä–µ—Å—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (Address) - **–†–ï–®–ï–ù–û: Context.Address**
  - ‚úÖ –ó–Ω–∞—á–µ–Ω–∏—é —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (Value) - **–†–ï–®–ï–ù–û: Context.Value**
  - ‚úÖ –î–∞–Ω–Ω—ã–º —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (Input/Data) - **–†–ï–®–ï–ù–û: Context.Input**
  - ‚ö†Ô∏è –ë–ª–æ–∫—á–µ–π–Ω –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ (block number, timestamp) - **–†–ï–®–ï–ù–û: Context.BlockInfo (—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –≥–æ—Ç–æ–≤–∞)**

### 5. **–¢–∏–ø—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** (–≤ —Ä–∞–±–æ—Ç–µ)
- ‚ö†Ô∏è AppTxType –∏ ApiTxtype –æ–ø—Ä–µ–¥–µ–ª–µ–Ω—ã, –Ω–æ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è - **–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –≠–¢–ê–ü 3**
- ‚ö†Ô∏è –ù–µ–ø–æ–Ω—è—Ç–Ω–æ, –∫–∞–∫–æ–π —Ç–∏–ø –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - **–ü–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –≤ –≠–¢–ê–ü 3**

---

## üéØ –ü–õ–ê–ù –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### ‚úÖ –≠–¢–ê–ü 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ VM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –±–ª–æ–∫—á–µ–π–Ω–∞ - –ó–ê–í–ï–†–®–ï–ù

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å Context –≤ VM (Caller, Address, Value, Input, BlockInfo)
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥—ã (ADDRESS, CALLER, CALLVALUE, CALLDATALOAD, CALLDATASIZE, CALLDATACOPY)
3. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Å–∏—Å—Ç–µ–º—É –≥–∞–∑–∞ –≤ VM (GasLimit, GasUsed)
4. ‚è≥ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å —Å Vault –¥–ª—è —á—Ç–µ–Ω–∏—è –±–∞–ª–∞–Ω—Å–æ–≤ (—á–∞—Å—Ç–∏—á–Ω–æ - –¥–æ—Å—Ç—É–ø –∫ Vault —á–µ—Ä–µ–∑ Context)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `context.go` - —Å–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ Context
- ‚úÖ `gas.go` - —Å–æ–∑–¥–∞–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–∞ –≥–∞–∑–∞
- ‚úÖ `vm.go` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Context –∏ –≥–∞–∑–∞
- ‚úÖ `opcodes.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –Ω–æ–≤—ã–µ –æ–ø–∫–æ–¥—ã
- ‚úÖ `operations.go` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –æ–ø–µ—Ä–∞—Ü–∏–∏ –¥–ª—è –Ω–æ–≤—ã—Ö –æ–ø–∫–æ–¥–æ–≤
- ‚úÖ `context_test.go` - —Å–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã (8 —Ç–µ—Å—Ç–æ–≤)

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ 42 —Ç–µ—Å—Ç–∞ VM –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –í—Å–µ –æ–ø–∫–æ–¥—ã —Ä–∞–±–æ—Ç–∞—é—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–∞–∑–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç

**–û—Ü–µ–Ω–∫–∞:** –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å - –í–´–ü–û–õ–ù–ï–ù–û

---

### ‚úÖ –≠–¢–ê–ü 2: –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - –ó–ê–í–ï–†–®–ï–ù

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å —Ö—Ä–∞–Ω–∏–ª–∏—â–µ –±–∞–π—Ç–∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ Vault
2. ‚úÖ –ú–µ—Ç–æ–¥—ã: `StoreContractCode(address, code)`, `GetContractCode(address)`, `HasContractCode(address)`
3. ‚úÖ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å CodeHash –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º pogreb —Ö—Ä–∞–Ω–∏–ª–∏—â–µ–º

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `storage/vault.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–∞
- ‚úÖ `storage/vault_contract_test.go` - —Å–æ–∑–¥–∞–Ω—ã —Ç–µ—Å—Ç—ã (6 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å `Vault` –æ–±–Ω–æ–≤–ª–µ–Ω

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ 6 —Ç–µ—Å—Ç–æ–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–∞ –ø—Ä–æ—Ö–æ–¥—è—Ç
- ‚úÖ –ö–æ–¥ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ pogreb —Å –ø—Ä–µ—Ñ–∏–∫—Å–æ–º "code:"
- ‚úÖ CodeHash –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≤—ã—á–∏—Å–ª—è–µ—Ç—Å—è –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ StateAccount
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã storage –ø—Ä–æ—Ö–æ–¥—è—Ç (28 —Ç–µ—Å—Ç–æ–≤)

**–û—Ü–µ–Ω–∫–∞:** –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å - –í–´–ü–û–õ–ù–ï–ù–û

---

### ‚úÖ –≠–¢–ê–ü 3: –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - –ó–ê–í–ï–†–®–ï–ù

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AppTxType)
2. ‚úÖ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ç–∏–ø –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (To == nil && Data != nil)
3. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å `To == nil` –∫–∞–∫ —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
4. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å `Data != nil` –∫–∞–∫ –≤—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `validator/contract_helpers.go` - —Ñ—É–Ω–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- ‚úÖ `validator/validator.go` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ AppTxType
- ‚úÖ `types/transaction.go` - –∏—Å–ø—Ä–∞–≤–ª–µ–Ω crvTxHash –¥–ª—è nil To
- ‚úÖ `validator/contract_helpers_test.go` - —Ç–µ—Å—Ç—ã (4 —Ç–µ—Å—Ç–∞)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `IsContractCreation()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- ‚úÖ `IsContractCall()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- ‚úÖ `IsContractTransaction()` - –æ–±—â–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞
- ‚úÖ `ShouldExecuteVM()` - –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è VM
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ AppTxType –≤ ExecuteTransaction

**–û—Ü–µ–Ω–∫–∞:** –ù–∏–∑–∫–∞—è-—Å—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

---

### ‚úÖ –≠–¢–ê–ü 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExecuteTransaction - –ó–ê–í–ï–†–®–ï–ù

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å, –∫–æ–≥–¥–∞ –≤—ã–ø–æ–ª–Ω—è—Ç—å VM (–µ—Å–ª–∏ To –∏–º–µ–µ—Ç –∫–æ–¥ –∏–ª–∏ Data –Ω–µ –ø—É—Å—Ç–æ–π)
2. ‚úÖ –ó–∞–≥—Ä—É–∑–∏—Ç—å –∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–∑ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å Context –¥–ª—è VM
4. ‚úÖ –í—ã–ø–æ–ª–Ω–∏—Ç—å VM —Å –±–∞–π—Ç–∫–æ–¥–æ–º
5. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç (RETURN, REVERT)
6. ‚úÖ –û–±–Ω–æ–≤–∏—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ (–±–∞–ª–∞–Ω—Å—ã, –≥–∞–∑)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `validator/contract_executor.go` - –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- ‚úÖ `validator/validator.go` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è ExecuteContractCall –≤ ExecuteTransaction

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `ExecuteContract()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —á–µ—Ä–µ–∑ VM
- ‚úÖ `ExecuteContractCall()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- ‚úÖ `getBlockInfo()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–ª–æ–∫–µ –¥–ª—è Context
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExecuteTransaction –¥–ª—è AppTxType
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (REVERT, OutOfGas)
- ‚úÖ –°–ø–∏—Å—ã–≤–∞–Ω–∏–µ –≥–∞–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

**–û—Ü–µ–Ω–∫–∞:** –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

---

### ‚úÖ –≠–¢–ê–ü 5: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CREATE) - –ó–ê–í–ï–†–®–ï–ù

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Å `To == nil` –∏ `Data != nil`
2. ‚úÖ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (nonce-based —á–µ—Ä–µ–∑ blake2b)
3. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –±–∞–π—Ç–∫–æ–¥–∞ –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
4. ‚úÖ –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
5. ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ (–∞–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `validator/contract_executor.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã `GenerateContractAddress()` –∏ `ExecuteContractCreation()`
- ‚úÖ `validator/validator.go` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –≤ ExecuteTransaction

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `GenerateContractAddress()` - –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∞–¥—Ä–µ—Å–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ sender + nonce (blake2b)
- ‚úÖ `ExecuteContractCreation()` - —Å–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ–º –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExecuteTransaction –¥–ª—è AppTxType —Å IsContractCreation
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ RETURN –∏–∑ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–∞ (runtime code)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ (REVERT, OutOfGas)
- ‚úÖ –£–≤–µ–ª–∏—á–µ–Ω–∏–µ nonce –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è
- ‚úÖ –ü–µ—Ä–µ–≤–æ–¥ value –∫–æ–Ω—Ç—Ä–∞–∫—Ç—É –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏

**–û—Ü–µ–Ω–∫–∞:** –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

---

### ‚úÖ –≠–¢–ê–ü 6: –í—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CALL) - –ó–ê–í–ï–†–®–ï–ù

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å CallInterface –≤ Context –¥–ª—è –º–µ–∂–∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ–ø–∫–æ–¥ CALL (0x98) –≤ VM
3. ‚úÖ –°–æ–∑–¥–∞—Ç—å VaultCallAdapter –¥–ª—è –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
4. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞—Ç—å CALL –≤ ExecuteContract –∏ ExecuteContractCreation
5. ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞ –∏ –≥–∞–∑–∞ –¥–ª—è –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–æ–≤

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `pallada/context.go` - –¥–æ–±–∞–≤–ª–µ–Ω CallInterface –∏ –ø–æ–ª–µ CallerInt –≤ Context
- ‚úÖ `pallada/opcodes.go` - –¥–æ–±–∞–≤–ª–µ–Ω –æ–ø–∫–æ–¥ CALL (0x98)
- ‚úÖ `pallada/operations.go` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ opCall()
- ‚úÖ `pallada/vm.go` - –¥–æ–±–∞–≤–ª–µ–Ω–∞ –æ–±—Ä–∞–±–æ—Ç–∫–∞ CALL –æ–ø–∫–æ–¥–∞
- ‚úÖ `validator/contract_executor.go` - –¥–æ–±–∞–≤–ª–µ–Ω VaultCallAdapter –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ Context

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `CallInterface` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- ‚úÖ `VaultCallAdapter` - –∞–¥–∞–ø—Ç–µ—Ä Vault –∏ Chain –∫ CallInterface
- ‚úÖ `opCall()` - —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è CALL –æ–ø–∫–æ–¥–∞ —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –≥–∞–∑–∞, value, input/output
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è CallInterface –≤ ExecuteContract –∏ ExecuteContractCreation
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ REVERT –∏ –æ—à–∏–±–æ–∫ –≤–æ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö –≤—ã–∑–æ–≤–∞—Ö

**–û—Ü–µ–Ω–∫–∞:** –í—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å - –í–´–ü–û–õ–ù–ï–ù–û

---

### ‚úÖ –≠–¢–ê–ü 7: Storage –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - –ó–ê–í–ï–†–®–ï–ù

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –î–æ–±–∞–≤–∏—Ç—å Storage interface –≤ Context
2. ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å SLOAD/SSTORE –æ–ø–∫–æ–¥—ã
3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Vault —á–µ—Ä–µ–∑ StorageInterface
4. ‚úÖ –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ SetStorage/GetStorage –≤ Vault

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `pallada/opcodes.go` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –æ–ø–∫–æ–¥—ã SLOAD (0x96) –∏ SSTORE (0x97)
- ‚úÖ `pallada/context.go` - –¥–æ–±–∞–≤–ª–µ–Ω StorageInterface –∏ –ø–æ–ª–µ Storage –≤ Context
- ‚úÖ `pallada/operations.go` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã opSload() –∏ opSstore()
- ‚úÖ `pallada/vm.go` - –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–≥–æ –æ–ø–∫–æ–¥–∞
- ‚úÖ `storage/vault.go` - —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã SetStorage() –∏ GetStorage()
- ‚úÖ `validator/contract_executor.go` - –¥–æ–±–∞–≤–ª–µ–Ω VaultStorageAdapter –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è storage –≤ Context

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `StorageInterface` - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å storage
- ‚úÖ `SetStorage()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ storage –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ (–∫–ª—é—á: "storage:" + address + ":" + key)
- ‚úÖ `GetStorage()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –∏–∑ storage –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- ‚úÖ `opSload()` - –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ storage (100 –≥–∞–∑–∞)
- ‚úÖ `opSstore()` - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≤ storage (20000 –≥–∞–∑–∞ + –ª–æ–≥–∏–∫–∞ refund)
- ‚úÖ `VaultStorageAdapter` - –∞–¥–∞–ø—Ç–µ—Ä Vault –∫ StorageInterface
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è storage –≤ ExecuteContract –∏ ExecuteContractCreation

**–û—Ü–µ–Ω–∫–∞:** –°—Ä–µ–¥–Ω—è—è-–≤—ã—Å–æ–∫–∞—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

---

### ‚úÖ –≠–¢–ê–ü 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞ - –ó–ê–í–ï–†–®–ï–ù (—á–∞—Å—Ç–∏—á–Ω–æ)

**–ó–∞–¥–∞—á–∏:**
1. ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è SLOAD/SSTORE –æ–ø–∫–æ–¥–æ–≤ (5 —Ç–µ—Å—Ç–æ–≤)
2. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
3. ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –¥–ª—è –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
4. ‚úÖ –¢–µ—Å—Ç—ã –¥–ª—è storage –æ–ø–µ—Ä–∞—Ü–∏–π –≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞—Ö
5. ‚è≥ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

**–§–∞–π–ª—ã –∏–∑–º–µ–Ω–µ–Ω—ã:**
- ‚úÖ `pallada/storage_test.go` - —Ç–µ—Å—Ç—ã –¥–ª—è SLOAD/SSTORE (5 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ `validator/contract_integration_test.go` - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã (3 —Ç–µ—Å—Ç–∞)

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `TestVM_Sload` - —Ç–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ storage
- ‚úÖ `TestVM_Sstore` - —Ç–µ—Å—Ç —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è –≤ storage
- ‚úÖ `TestVM_SloadSstore` - —Ç–µ—Å—Ç –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ `TestVM_Sload_EmptyStorage` - —Ç–µ—Å—Ç –∑–∞–≥—Ä—É–∑–∫–∏ –∏–∑ –ø—É—Å—Ç–æ–≥–æ storage
- ‚úÖ `TestVM_Sstore_ZeroValue` - —Ç–µ—Å—Ç —É–¥–∞–ª–µ–Ω–∏—è –∑–Ω–∞—á–µ–Ω–∏—è (–Ω—É–ª–µ–≤–æ–µ –∑–Ω–∞—á–µ–Ω–∏–µ)
- ‚úÖ `TestContractCreationAndExecution` - –ø–æ–ª–Ω—ã–π —Ü–∏–∫–ª —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- ‚úÖ `TestContractCallWithStorage` - –≤—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —Å —á—Ç–µ–Ω–∏–µ–º storage
- ‚úÖ `TestContractStorageOperations` - –∫–æ–º–ø–ª–µ–∫—Å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å storage

**–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:**
- ‚úÖ –í—Å–µ —Ç–µ—Å—Ç—ã VM –ø—Ä–æ—Ö–æ–¥—è—Ç (26 —Ç–µ—Å—Ç–æ–≤)
- ‚úÖ –í—Å–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç (3 —Ç–µ—Å—Ç–∞)
- ‚úÖ Storage —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

**–û—Ü–µ–Ω–∫–∞:** –°—Ä–µ–¥–Ω—è—è —Å–ª–æ–∂–Ω–æ—Å—Ç—å

---

## üîß –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò

### –¢–æ—á–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

1. **validator/validator.go:ExecuteTransaction()**
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ç–∏–ø–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
   - –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ: –∫–æ–Ω—Ç—Ä–∞–∫—Ç –∏–ª–∏ –æ–±—ã—á–Ω—ã–π –ø–µ—Ä–µ–≤–æ–¥
   - –í—ã–∑–æ–≤ VM –ø—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏

2. **storage/vault.go**
   - –ú–µ—Ç–æ–¥—ã –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è/–∑–∞–≥—Ä—É–∑–∫–∏ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º pogreb

3. **types/account.go**
   - –í–æ–∑–º–æ–∂–Ω–æ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ StateAccount
   - –§–ª–∞–≥ "—ç—Ç–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç" (Type field —É–∂–µ –µ—Å—Ç—å)

4. **vm.go**
   - –î–æ–±–∞–≤–ª–µ–Ω–∏–µ Context
   - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Vault –¥–ª—è —á—Ç–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ VM

1. ‚úÖ **Context —Å—Ç—Ä—É–∫—Ç—É—Ä–∞:**
```go
type Context struct {
    Caller    types.Address
    Address   types.Address  // –ê–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
    Value     *big.Int
    Input     []byte         // tx.Data()
    GasLimit  uint64
    GasPrice  *big.Int
    BlockInfo *BlockInfo     // –Ω–æ–º–µ—Ä –±–ª–æ–∫–∞, timestamp –∏ —Ç.–¥.
}
```

2. ‚úÖ **–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –æ–ø–∫–æ–¥—ã:**
   - ‚úÖ ADDRESS (0x90), CALLER (0x91), CALLVALUE (0x92)
   - ‚úÖ CALLDATALOAD (0x93), CALLDATASIZE (0x94), CALLDATACOPY (0x95)
   - ‚úÖ SLOAD (0x96), SSTORE (0x97) - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û –≤ –≠–¢–ê–ü 7**
   - ‚úÖ CALL (0x98) - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û –≤ –≠–¢–ê–ü 6**
   - ‚è≥ CREATE, DELEGATECALL - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
   - ‚è≥ BLOCKHASH, TIMESTAMP, NUMBER - –ø–ª–∞–Ω–∏—Ä—É–µ—Ç—Å—è –ø–æ–∑–∂–µ

3. ‚úÖ **–°–∏—Å—Ç–µ–º–∞ –≥–∞–∑–∞:**
   - ‚úÖ –ü–æ–¥—Å—á–µ—Ç –≥–∞–∑–∞ –¥–ª—è –∫–∞–∂–¥–æ–π –æ–ø–µ—Ä–∞—Ü–∏–∏
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–∏–º–∏—Ç–∞ –≥–∞–∑–∞
   - ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–≥–æ –≥–∞–∑–∞
   - ‚úÖ GasMeter —Å –º–µ—Ç–æ–¥–∞–º–∏ UseGas, RefundGas, GasUsed

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ Vault

1. ‚úÖ **–ú–µ—Ç–æ–¥—ã —Ö—Ä–∞–Ω–µ–Ω–∏—è –∫–æ–¥–∞:**
   - ‚úÖ `StoreContractCode(address, code)` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–¥ –∏ –≤—ã—á–∏—Å–ª—è–µ—Ç CodeHash
   - ‚úÖ `GetContractCode(address)` - –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –∏–∑ pogreb
   - ‚úÖ `HasContractCode(address)` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–¥–∞

2. ‚úÖ **–•—Ä–∞–Ω–∏–ª–∏—â–µ:**
   - ‚úÖ –ö–æ–¥ —Ö—Ä–∞–Ω–∏—Ç—Å—è –≤ pogreb —Å –∫–ª—é—á–æ–º "code:" + address.Bytes()
   - ‚úÖ CodeHash –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è –≤ StateAccount
   - ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–µ—à–µ–π

---

## üìã –ü–†–ò–û–†–ò–¢–ï–¢–´

### –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (MVP) - –í–°–ï –ó–ê–í–ï–†–®–ï–ù–´ ‚úÖ
1. ‚úÖ –≠–¢–ê–ü 1: –ö–æ–Ω—Ç–µ–∫—Å—Ç –∏ –±–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥—ã - **–ó–ê–í–ï–†–®–ï–ù**
2. ‚úÖ –≠–¢–ê–ü 2: –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞ - **–ó–ê–í–ï–†–®–ï–ù**
3. ‚úÖ –≠–¢–ê–ü 3: –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ - **–ó–ê–í–ï–†–®–ï–ù**
4. ‚úÖ –≠–¢–ê–ü 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExecuteTransaction - **–ó–ê–í–ï–†–®–ï–ù**

### –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –í–°–ï –ó–ê–í–ï–†–®–ï–ù–´ ‚úÖ
5. ‚úÖ –≠–¢–ê–ü 5: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CREATE) - **–ó–ê–í–ï–†–®–ï–ù**
6. ‚úÖ –≠–¢–ê–ü 7: Storage –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - **–ó–ê–í–ï–†–®–ï–ù**
7. ‚úÖ –≠–¢–ê–ü 8: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ - **–ó–ê–í–ï–†–®–ï–ù (—á–∞—Å—Ç–∏—á–Ω–æ)**

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç
7. ‚úÖ –≠–¢–ê–ü 6: –í—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CALL –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏) - **–ó–ê–í–ï–†–®–ï–ù**
8. ‚è≥ –≠–¢–ê–ü 8: –†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

---

## ‚ö° –†–ò–°–ö–ò –ò –ü–†–û–ë–õ–ï–ú–´

### –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —Ä–∏—Å–∫–∏
1. **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: VM –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω–æ–π –¥–ª—è –±–æ–ª—å—à–∏—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
2. **–ì–∞–∑**: –ù—É–∂–Ω–∞ —Ç–æ—á–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Ä–∞—Å—á–µ—Ç–∞ –≥–∞–∑–∞
3. **–•—Ä–∞–Ω–∏–ª–∏—â–µ**: –ú–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤
4. **–°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –ò–∑–º–µ–Ω–µ–Ω–∏—è –º–æ–≥—É—Ç —Å–ª–æ–º–∞—Ç—å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–µ —Ä–∏—Å–∫–∏
1. **–û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å**: –°—É—â–µ—Å—Ç–≤—É—é—â–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–æ–ª–∂–Ω—ã —Ä–∞–±–æ—Ç–∞—Ç—å
2. **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å**: –•—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–¥–∞ –≤—Å–µ—Ö –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
3. **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**: –í–∞–ª–∏–¥–∞—Ü–∏—è –±–∞–π—Ç–∫–æ–¥–∞, –∑–∞—â–∏—Ç–∞ –æ—Ç DoS

---

## üéØ –†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–ò

### –ù–∞—á–∞—Ç—å —Å:
1. **–ú–∏–Ω–∏–º–∞–ª—å–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –î–æ–±–∞–≤–∏—Ç—å Context –≤ VM, —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –±–∞–∑–æ–≤—ã–µ –±–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥—ã
2. **–ü—Ä–æ—Å—Ç–æ–µ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ**: –•—Ä–∞–Ω–∏—Ç—å –∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –≤ –ø–∞–º—è—Ç–∏/Vault
3. **–û–¥–∏–Ω —Ç–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏**: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å AppTxType –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
4. **–ë–∞–∑–æ–≤–æ–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ**: –í—ã–ø–æ–ª–Ω—è—Ç—å VM –ø—Ä–∏ –Ω–∞–ª–∏—á–∏–∏ Data –≤ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

### –ò–∑–±–µ–≥–∞—Ç—å –Ω–∞ –ø–µ—Ä–≤–æ–º —ç—Ç–∞–ø–µ:
- –°–ª–æ–∂–Ω—ã–µ CALL –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏
- CREATE2 —Å salt
- –ü–æ–ª–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ storage (–º–æ–∂–Ω–æ –Ω–∞—á–∞—Ç—å —Å –ø—Ä–æ—Å—Ç–æ–≥–æ map)
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏ (—Å–Ω–∞—á–∞–ª–∞ —Å–¥–µ–ª–∞—Ç—å —Ä–∞–±–æ—Ç–∞—é—â–∏–º)

---

## üìù –°–¢–ê–¢–£–° –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (MVP + CALL)
1. ‚úÖ **–≠–¢–ê–ü 1** - Context –∏ –±–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥—ã —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
2. ‚úÖ **–≠–¢–ê–ü 2** - –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
3. ‚úÖ **–≠–¢–ê–ü 3** - –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (AppTxType)
4. ‚úÖ **–≠–¢–ê–ü 4** - VM –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω–∞ –≤ ExecuteTransaction
5. ‚úÖ **–≠–¢–ê–ü 5** - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CREATE) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
6. ‚úÖ **–≠–¢–ê–ü 6** - CALL –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
7. ‚úÖ **–≠–¢–ê–ü 7** - Storage –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
8. ‚úÖ **–≠–¢–ê–ü 8** - –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (–æ—Å–Ω–æ–≤–Ω—ã–µ —Ç–µ—Å—Ç—ã –∑–∞–≤–µ—Ä—à–µ–Ω—ã)

### ‚úÖ –ó–ê–í–ï–†–®–ï–ù–û (—Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- ‚úÖ **–≠–¢–ê–ü 6** - CALL –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ (–º–µ–∂–∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã) - **–ó–ê–í–ï–†–®–ï–ù**

### ‚è≥ –û–ü–¶–ò–û–ù–ê–õ–¨–ù–û (–¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏)
- ‚è≥ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø–∫–æ–¥—ã (BLOCKHASH, TIMESTAMP, NUMBER)
- ‚è≥ CREATE2 –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤

---

## üí° –£–ù–ò–ö–ê–õ–¨–ù–´–ï –í–û–ó–ú–û–ñ–ù–û–°–¢–ò

–ü–æ—Å–ª–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ Cerera –ø–æ–ª—É—á–∏–ª:
- ‚úÖ –°–æ–±—Å—Ç–≤–µ–Ω–Ω–∞—è VM (–Ω–µ EVM) - **–ü–û–õ–ù–û–°–¢–¨–Æ –ò–ù–¢–ï–ì–†–ò–†–û–í–ê–ù–û**
- ‚úÖ 256-–±–∏—Ç–Ω—ã–µ —Å–ª–æ–≤–∞ (–±–æ–ª—å—à–µ —á–µ–º EVM) - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π –≥–∞–∑–∞ - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚úÖ –ì–∏–±–∫–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –¥–ª—è —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚úÖ Storage –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∏ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**
- ‚úÖ –ü–æ–ª–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä - **–†–ï–ê–õ–ò–ó–û–í–ê–ù–û**

## üìä –¢–ï–ö–£–©–ò–ô –°–¢–ê–¢–£–°

### –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
- ‚úÖ **–≠–¢–ê–ü 1**: Context, –±–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥—ã, —Å–∏—Å—Ç–µ–º–∞ –≥–∞–∑–∞ (100%)
- ‚úÖ **–≠–¢–ê–ü 2**: –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (100%)
- ‚úÖ **–≠–¢–ê–ü 3**: –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (100%)
- ‚úÖ **–≠–¢–ê–ü 4**: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExecuteTransaction (100%)
- ‚úÖ **–≠–¢–ê–ü 5**: –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CREATE) (100%)
- ‚úÖ **–≠–¢–ê–ü 7**: Storage –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (100%)
- ‚úÖ **–≠–¢–ê–ü 8**: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (—á–∞—Å—Ç–∏—á–Ω–æ, 100% –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–µ—Å—Ç–æ–≤)

### –û–∂–∏–¥–∞–µ—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
- ‚è≥ –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø–∫–æ–¥—ã (BLOCKHASH, TIMESTAMP, NUMBER) - –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ

### –ü—Ä–æ–≥—Ä–µ—Å—Å: 8/8 —ç—Ç–∞–ø–æ–≤ (100%) - MVP + CALL –ó–ê–í–ï–†–®–ï–ù ‚úÖ

---

## üìã –û–¶–ï–ù–ö–ê –ì–û–¢–û–í–ù–û–°–¢–ò (–ê–∫—Ç—É–∞–ª—å–Ω–∞—è –Ω–∞ –º–æ–º–µ–Ω—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏)

### ‚úÖ –û–ë–©–ê–Ø –ì–û–¢–û–í–ù–û–°–¢–¨: **95%** (MVP –ø–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤)

**–°—Ç–∞—Ç—É—Å:** –ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è –±–∞–∑–æ–≤—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤ —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏.

### –î–µ—Ç–∞–ª—å–Ω–∞—è —Ä–∞–∑–±–∏–≤–∫–∞:

#### ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ (100%):
1. **–≠–¢–ê–ü 1** - Context –∏ –±–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥—ã ‚úÖ
2. **–≠–¢–ê–ü 2** - –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ ‚úÖ
3. **–≠–¢–ê–ü 3** - –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ ‚úÖ
4. **–≠–¢–ê–ü 4** - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExecuteTransaction ‚úÖ
5. **–≠–¢–ê–ü 5** - –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (CREATE) ‚úÖ
6. **–≠–¢–ê–ü 7** - Storage –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (SLOAD/SSTORE) ‚úÖ
7. **–≠–¢–ê–ü 8** - –ë–∞–∑–æ–≤–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚úÖ

#### ‚ö†Ô∏è –ß–∞—Å—Ç–∏—á–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ / –¢—Ä–µ–±—É–µ—Ç –¥–æ—Ä–∞–±–æ—Ç–∫–∏:
1. **–û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:**
   - ‚ö†Ô∏è TODO: –£–¥–∞–ª–µ–Ω–∏–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –ø—Ä–∏ –æ—à–∏–±–∫–µ/REVERT (—Å—Ç—Ä–æ–∫–∏ 200, 205 –≤ `contract_executor.go`)
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã —Å–æ–∑–¥–∞—é—Ç—Å—è, –Ω–æ –ø—Ä–∏ –æ—à–∏–±–∫–µ –∫–æ–¥ –æ—Å—Ç–∞–µ—Ç—Å—è –≤ —Ö—Ä–∞–Ω–∏–ª–∏—â–µ)
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è

2. **–í–∞–ª–∏–¥–∞—Ü–∏—è –≥–∞–∑–∞:**
   - ‚ö†Ô∏è TODO: –î–æ—Ä–∞–±–æ—Ç–∫–∞ –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –≥–∞–∑–∞ –≤ `ValidateTransaction1` (—Å—Ç—Ä–æ–∫–∞ 759 –≤ `validator.go`)
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (–≥–∞–∑ —Ä–∞–±–æ—Ç–∞–µ—Ç, –Ω–æ –µ—Å—Ç—å –∑–∞–º–µ—á–∞–Ω–∏–µ –≤ –∫–æ–¥–µ)
   - **–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è:** –£—Ç–æ—á–Ω–∏—Ç—å —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è –∫ –≤–∞–ª–∏–¥–∞—Ü–∏–∏

#### ‚è≥ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ (–Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è MVP):
1. **–≠–¢–ê–ü 6** - CALL –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ (–º–µ–∂–∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã)
   - **–°—Ç–∞—Ç—É—Å:** –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (–±–∞–∑–æ–≤–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π —Ä–∞–±–æ—Ç–∞–µ—Ç)
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ö–æ–Ω—Ç—Ä–∞–∫—Ç—ã –º–æ–∂–Ω–æ –≤—ã–∑—ã–≤–∞—Ç—å –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π, –Ω–æ –∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –ø–æ–∫–∞ –Ω–µ –º–æ–≥—É—Ç –≤—ã–∑—ã–≤–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞

2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –æ–ø–∫–æ–¥—ã:**
   - BLOCKHASH, TIMESTAMP, NUMBER - –Ω–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –ù–∏–∑–∫–∞—è (BlockInfo –¥–æ—Å—Ç—É–ø–µ–Ω —á–µ—Ä–µ–∑ Context, –Ω–æ –Ω–µ—Ç –æ–ø–∫–æ–¥–æ–≤ –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∏–∑ VM)
   - **–ü—Ä–∏–º–µ—á–∞–Ω–∏–µ:** –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–ª–æ–∫–µ –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ Context, –Ω–æ –Ω–µ—Ç –æ–ø–∫–æ–¥–æ–≤ –¥–ª—è —á—Ç–µ–Ω–∏—è –∏–∑ –±–∞–π—Ç–∫–æ–¥–∞

3. **CREATE2** - –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - **–ö—Ä–∏—Ç–∏—á–Ω–æ—Å—Ç—å:** –û—á–µ–Ω—å –Ω–∏–∑–∫–∞—è (CREATE —Ä–∞–±–æ—Ç–∞–µ—Ç —á–µ—Ä–µ–∑ nonce-based –∞–¥—Ä–µ—Å–∞)

### üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏:

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã:**
- ‚úÖ 8 –Ω–æ–≤—ã—Ö –æ–ø–∫–æ–¥–æ–≤ (ADDRESS, CALLER, CALLVALUE, CALLDATALOAD, CALLDATASIZE, CALLDATACOPY, SLOAD, SSTORE)
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–∞–∑–∞ (GasMeter) —Å –ø–æ–ª–Ω–æ–π –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π
- ‚úÖ Context –¥–ª—è VM —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π Storage
- ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (StoreContractCode, GetContractCode, HasContractCode)
- ‚úÖ –•—Ä–∞–Ω–∏–ª–∏—â–µ storage –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (SetStorage, GetStorage)
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (ExecuteContractCreation)
- ‚úÖ –í—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ –∏–∑ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (ExecuteContractCall)
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ –≤–∞–ª–∏–¥–∞—Ç–æ—Ä (–ø–æ–ª–Ω–∞—è –æ–±—Ä–∞–±–æ—Ç–∫–∞ AppTxType)

**–¢–µ—Å—Ç–æ–≤–æ–µ –ø–æ–∫—Ä—ã—Ç–∏–µ:**
- ‚úÖ 26 —Ç–µ—Å—Ç–æ–≤ VM (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç)
- ‚úÖ 5 —Ç–µ—Å—Ç–æ–≤ Storage (SLOAD/SSTORE)
- ‚úÖ 7 —Ç–µ—Å—Ç–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤ (–∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ)
- ‚úÖ 6 —Ç–µ—Å—Ç–æ–≤ Vault (—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∫–æ–¥–∞)
- ‚úÖ 4 —Ç–µ—Å—Ç–∞ helpers (–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π)
- **–ò—Ç–æ–≥–æ:** 48+ —Ç–µ—Å—Ç–æ–≤, –≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ

**–ö–æ–¥:**
- ‚úÖ ~2500+ —Å—Ç—Ä–æ–∫ –Ω–æ–≤–æ–≥–æ –∫–æ–¥–∞
- ‚úÖ 9 –Ω–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ 10+ –∏–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
- ‚úÖ –í—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ –∫–æ–¥–∞, —Ö–æ—Ä–æ—à–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞

### üéØ –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 1 (–†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∏—Å–ø—Ä–∞–≤–∏—Ç—å):
1. **–î–æ–±–∞–≤–∏—Ç—å –æ—Ç–∫–∞—Ç –∏–∑–º–µ–Ω–µ–Ω–∏–π –ø—Ä–∏ –æ—à–∏–±–∫–µ —Å–æ–∑–¥–∞–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞:**
   - –ü—Ä–∏ REVERT –∏–ª–∏ OutOfGas –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —É–¥–∞–ª—è—Ç—å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–Ω—ã–π –∫–æ–¥
   - –≠—Ç–æ –≤–∞–∂–Ω–æ –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –±–ª–æ–∫—á–µ–π–Ω–∞

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 2 (–ú–æ–∂–Ω–æ –æ—Ç–ª–æ–∂–∏—Ç—å):
1. **–†–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å CALL –º–µ–∂–¥—É –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ (–≠–¢–ê–ü 6):**
   - –ü–æ–∑–≤–æ–ª–∏—Ç –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º –≤—ã–∑—ã–≤–∞—Ç—å –¥—Ä—É–≥ –¥—Ä—É–≥–∞
   - –†–∞—Å—à–∏—Ä–∏—Ç —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å, –Ω–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ –¥–ª—è MVP

2. **–î–æ–±–∞–≤–∏—Ç—å –æ–ø–∫–æ–¥—ã BLOCKHASH, TIMESTAMP, NUMBER:**
   - –£–ø—Ä–æ—Å—Ç–∏—Ç –¥–æ—Å—Ç—É–ø –∫ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–ª–æ–∫–µ –∏–∑ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
   - –°–µ–π—á–∞—Å –¥–æ—Å—Ç—É–ø–Ω–æ —á–µ—Ä–µ–∑ Context, –Ω–æ –æ–ø–∫–æ–¥—ã —É–¥–æ–±–Ω–µ–µ

#### –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç 3 (–û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ):
1. **CREATE2 –¥–ª—è –¥–µ—Ç–µ—Ä–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—ã—Ö –∞–¥—Ä–µ—Å–æ–≤**
2. **–†–∞—Å—à–∏—Ä–µ–Ω–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–ª–æ–∂–Ω—ã—Ö —Å—Ü–µ–Ω–∞—Ä–∏–µ–≤**

### ‚úÖ –í—ã–≤–æ–¥:
**–ü—Ä–æ–µ–∫—Ç –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** MVP –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω –∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω. –û—Å–Ω–æ–≤–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ. –û—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏ –Ω–æ—Å—è—Ç –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ö–∞—Ä–∞–∫—Ç–µ—Ä –∏ –Ω–µ –±–ª–æ–∫–∏—Ä—É—é—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∏—Å—Ç–µ–º—ã.

---

## üìà –î–ï–¢–ê–õ–¨–ù–´–ô –ü–†–û–ì–†–ï–°–°

### ‚úÖ –≠–¢–ê–ü 1: –†–∞—Å—à–∏—Ä–µ–Ω–∏–µ VM –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å –∫–æ–Ω—Ç–µ–∫—Å—Ç–æ–º –±–ª–æ–∫—á–µ–π–Ω–∞
**–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ `Context` —Å –ø–æ–ª—è–º–∏: Caller, Address, Value, Input, GasLimit, GasPrice, BlockInfo
- ‚úÖ –°–∏—Å—Ç–µ–º–∞ –≥–∞–∑–∞ `GasMeter` —Å –º–µ—Ç–æ–¥–∞–º–∏: UseGas, RefundGas, GasUsed, GasRemaining
- ‚úÖ 6 –Ω–æ–≤—ã—Ö –±–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥–æ–≤: ADDRESS, CALLER, CALLVALUE, CALLDATALOAD, CALLDATASIZE, CALLDATACOPY
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Context –∏ GasMeter –≤ VM
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –∫–æ–Ω–≤–µ—Ä—Ç–∞—Ü–∏–∏ Address ‚Üî big.Int
- ‚úÖ 8 –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤ –¥–ª—è –±–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥–æ–≤

**–§–∞–π–ª—ã:**
- `context.go` (72 —Å—Ç—Ä–æ–∫–∏)
- `gas.go` (143 —Å—Ç—Ä–æ–∫–∏)
- `vm.go` (–æ–±–Ω–æ–≤–ª–µ–Ω)
- `opcodes.go` (–æ–±–Ω–æ–≤–ª–µ–Ω)
- `operations.go` (–æ–±–Ω–æ–≤–ª–µ–Ω)
- `context_test.go` (343 —Å—Ç—Ä–æ–∫–∏)

**–¢–µ—Å—Ç—ã:** 42/42 –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ

---

### ‚úÖ –≠–¢–ê–ü 2: –•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
**–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –ú–µ—Ç–æ–¥ `StoreContractCode(address, code)` - —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∫–æ–¥ –≤ pogreb —Å –∫–ª—é—á–æ–º "code:" + address
- ‚úÖ –ú–µ—Ç–æ–¥ `GetContractCode(address)` - –ø–æ–ª—É—á–∞–µ—Ç –∫–æ–¥ –∏–∑ pogreb
- ‚úÖ –ú–µ—Ç–æ–¥ `HasContractCode(address)` - –ø—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–¥–∞
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ CodeHash (blake2b) –ø—Ä–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–∏
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ CodeHash –≤ StateAccount
- ‚úÖ –°–æ–∑–¥–∞–Ω–∏–µ –∞–∫–∫–∞—É–Ω—Ç–∞ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞, –µ—Å–ª–∏ –µ–≥–æ –Ω–µ—Ç
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∫–æ–¥–∞ —á–µ—Ä–µ–∑ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —Ö–µ—à–µ–π
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –º–µ—Ç–æ–¥–æ–≤ –≤ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å Vault

**–§–∞–π–ª—ã:**
- `storage/vault.go` (–æ–±–Ω–æ–≤–ª–µ–Ω, –¥–æ–±–∞–≤–ª–µ–Ω–æ ~100 —Å—Ç—Ä–æ–∫)
- `storage/vault_contract_test.go` (276 —Å—Ç—Ä–æ–∫)

**–¢–µ—Å—Ç—ã:** 6/6 –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ

---

### ‚úÖ –≠–¢–ê–ü 3: –¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
**–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ –§—É–Ω–∫—Ü–∏–∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã—Ö —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (IsContractCreation, IsContractCall)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ AppTxType –≤ ExecuteTransaction
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ crvTxHash –¥–ª—è nil To
- ‚úÖ 4 —Ç–µ—Å—Ç–∞ –¥–ª—è –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è —Ç–∏–ø–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏

---

### ‚úÖ –≠–¢–ê–ü 4: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExecuteTransaction
**–°—Ç–∞—Ç—É—Å:** –ó–ê–í–ï–†–®–ï–ù ‚úÖ

**–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:**
- ‚úÖ `contract_executor.go` - –º–æ–¥—É–ª—å –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
- ‚úÖ `ExecuteContract()` - –≤—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ —á–µ—Ä–µ–∑ VM
- ‚úÖ `ExecuteContractCall()` - –æ–±—Ä–∞–±–æ—Ç–∫–∞ –≤—ã–∑–æ–≤–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- ‚úÖ `getBlockInfo()` - –ø–æ–ª—É—á–µ–Ω–∏–µ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –±–ª–æ–∫–µ
- ‚úÖ –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –≤ ExecuteTransaction –¥–ª—è AppTxType
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (RETURN, REVERT)
- ‚úÖ –°–ø–∏—Å—ã–≤–∞–Ω–∏–µ –≥–∞–∑–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ —Ä–µ–∞–ª—å–Ω–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

---

## üîç –¢–ï–•–ù–ò–ß–ï–°–ö–ò–ï –î–ï–¢–ê–õ–ò –†–ï–ê–õ–ò–ó–ê–¶–ò–ò

### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

#### 1. Context (`context.go`)
```go
type Context struct {
    Caller    types.Address  // –ê–¥—Ä–µ—Å –æ—Ç–ø—Ä–∞–≤–∏—Ç–µ–ª—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
    Address   types.Address   // –ê–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
    Value     *big.Int        // –ó–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (wei)
    Input     []byte          // –î–∞–Ω–Ω—ã–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (tx.Data())
    GasLimit  uint64          // –õ–∏–º–∏—Ç –≥–∞–∑–∞
    GasPrice  *big.Int        // –¶–µ–Ω–∞ –≥–∞–∑–∞
    BlockInfo *BlockInfo      // –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–ª–æ–∫–µ
}
```

#### 2. GasMeter (`gas.go`)
```go
type GasMeter struct {
    gasLimit uint64
    gasUsed  uint64
    Cost     *GasCost
}

// –ú–µ—Ç–æ–¥—ã:
- UseGas(amount) error
- RefundGas(amount)
- GasUsed() uint64
- GasRemaining() uint64
- CalculateMemoryGas(oldSize, newSize) uint64
```

#### 3. –ë–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥—ã
- **ADDRESS (0x90)**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞ –Ω–∞ —Å—Ç–µ–∫
- **CALLER (0x91)**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∞–¥—Ä–µ—Å –≤—ã–∑—ã–≤–∞—é—â–µ–≥–æ –Ω–∞ —Å—Ç–µ–∫
- **CALLVALUE (0x92)**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∑–Ω–∞—á–µ–Ω–∏–µ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –Ω–∞ —Å—Ç–µ–∫
- **CALLDATALOAD (0x93)**: –ó–∞–≥—Ä—É–∂–∞–µ—Ç 32 –±–∞–π—Ç–∞ –∏–∑ Input –ø–æ —Å–º–µ—â–µ–Ω–∏—é
- **CALLDATASIZE (0x94)**: –í–æ–∑–≤—Ä–∞—â–∞–µ—Ç —Ä–∞–∑–º–µ—Ä Input –Ω–∞ —Å—Ç–µ–∫
- **CALLDATACOPY (0x95)**: –ö–æ–ø–∏—Ä—É–µ—Ç –¥–∞–Ω–Ω—ã–µ –∏–∑ Input –≤ –ø–∞–º—è—Ç—å

#### 4. –ú–µ—Ç–æ–¥—ã Vault –¥–ª—è –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤
```go
// –°–æ—Ö—Ä–∞–Ω—è–µ—Ç –±–∞–π—Ç–∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
StoreContractCode(address types.Address, code []byte) error

// –ü–æ–ª—É—á–∞–µ—Ç –±–∞–π—Ç–∫–æ–¥ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
GetContractCode(address types.Address) ([]byte, error)

// –ü—Ä–æ–≤–µ—Ä—è–µ—Ç –Ω–∞–ª–∏—á–∏–µ –∫–æ–¥–∞
HasContractCode(address types.Address) bool
```

---

## üìä –°–¢–ê–¢–ò–°–¢–ò–ö–ê –ò–ù–¢–ï–ì–†–ê–¶–ò–ò

### –ö–æ–¥
- **–ù–æ–≤—ã—Ö —Ñ–∞–π–ª–æ–≤:** 9
  - `pallada/context.go`, `pallada/gas.go`
  - `pallada/context_test.go`, `pallada/storage_test.go`
  - `storage/vault_contract_test.go`
  - `validator/contract_helpers.go`, `validator/contract_helpers_test.go`
  - `validator/contract_executor.go`, `validator/contract_integration_test.go`
  
- **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤:** 10+
  - `pallada/vm.go`, `pallada/opcodes.go`, `pallada/operations.go`, `pallada/opcodes_test.go`
  - `storage/vault.go` (–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å + —Ä–µ–∞–ª–∏–∑–∞—Ü–∏—è)
  - `validator/validator.go`, `types/transaction.go`

- **–°—Ç—Ä–æ–∫ –∫–æ–¥–∞ –¥–æ–±–∞–≤–ª–µ–Ω–æ:** ~2500+
- **–ù–æ–≤—ã—Ö –æ–ø–∫–æ–¥–æ–≤:** 9 (ADDRESS, CALLER, CALLVALUE, CALLDATALOAD, CALLDATASIZE, CALLDATACOPY, SLOAD, SSTORE, CALL)
- **–ù–æ–≤—ã—Ö –º–µ—Ç–æ–¥–æ–≤ Vault:** 5 (StoreContractCode, GetContractCode, HasContractCode, SetStorage, GetStorage)
- **–ù–æ–≤—ã—Ö —Ñ—É–Ω–∫—Ü–∏–π –≤–∞–ª–∏–¥–∞—Ç–æ—Ä–∞:** 6+ (ExecuteContract, ExecuteContractCall, ExecuteContractCreation, GenerateContractAddress, IsContractCreation, IsContractCall, –∏ –¥—Ä.)

### –¢–µ—Å—Ç—ã
- **–¢–µ—Å—Ç–æ–≤ VM:** 26 (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ)
- **–¢–µ—Å—Ç–æ–≤ Storage:** 5 (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ)
- **–¢–µ—Å—Ç–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:** 7 (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ)
- **–¢–µ—Å—Ç–æ–≤ Vault:** 6 (–≤—Å–µ –ø—Ä–æ—Ö–æ–¥—è—Ç ‚úÖ)
- **–í—Å–µ–≥–æ –Ω–æ–≤—ã—Ö —Ç–µ—Å—Ç–æ–≤:** 18+
- **–ü–æ–∫—Ä—ã—Ç–∏–µ:** –í—ã—Å–æ–∫–æ–µ –¥–ª—è –≤—Å–µ—Ö —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–Ω—ã—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤

### –§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å
- **–ë–ª–æ–∫—á–µ–π–Ω-–æ–ø–∫–æ–¥—ã:** 6/6 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- **Storage –æ–ø–∫–æ–¥—ã:** 2/2 —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- **–ú–µ–∂–∫–æ–Ω—Ç—Ä–∞–∫—Ç–Ω—ã–µ –≤—ã–∑–æ–≤—ã:** CALL (1/1) —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ –∫–æ–¥–∞:** 100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- **–•—Ä–∞–Ω–∏–ª–∏—â–µ storage:** 100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- **–°–∏—Å—Ç–µ–º–∞ –≥–∞–∑–∞:** 100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ ‚úÖ
- **Context:** 100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω ‚úÖ
- **–°–æ–∑–¥–∞–Ω–∏–µ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:** 100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
- **–í—ã–∑–æ–≤ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤:** 100% —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ ‚úÖ
