# CI/CD –∏ –î–µ–ø–ª–æ–π

–≠—Ç–∞ –ø–∞–ø–∫–∞ —Å–æ–¥–µ—Ä–∂–∏—Ç –≤—Å–µ —Ñ–∞–π–ª—ã, —Å–≤—è–∑–∞–Ω–Ω—ã–µ —Å –¥–µ–ø–ª–æ–µ–º –∏ CI/CD –ø—Ä–æ–µ–∫—Ç–∞ Cerera.

## üìÅ –°–æ–¥–µ—Ä–∂–∏–º–æ–µ

- **Dockerfile** - Docker –æ–±—Ä–∞–∑ –¥–ª—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è Cerera
- **docker-compose.yml** - Compose —Ñ–∞–π–ª –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Cerera + Prometheus + Grafana
- **deploy.sh** - –°–∫—Ä–∏–ø—Ç –¥–ª—è –¥–µ–ø–ª–æ—è –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä
- **deploy-local.sh** - –°–∫—Ä–∏–ø—Ç –¥–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–≥–æ –¥–µ–ø–ª–æ—è
- **DEPLOYMENT.md** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–µ–ø–ª–æ—é
- **SYSTEMD-GUIDE.md** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ systemd —Å–µ—Ä–≤–∏—Å–∞
- **prometheus.yml** - –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Prometheus –¥–ª—è –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

## üê≥ Docker

### –°–±–æ—Ä–∫–∞ –æ–±—Ä–∞–∑–∞

```bash
# –ò–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
docker build -f ci-cd/Dockerfile -t cerera:latest .
```

### –ó–∞–ø—É—Å–∫ —á–µ—Ä–µ–∑ docker-compose

```bash
# –ò–∑ –ø–∞–ø–∫–∏ ci-cd
cd ci-cd
docker-compose up -d

# –ò–ª–∏ –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞
docker-compose -f ci-cd/docker-compose.yml up -d
```

### –ó–∞–ø—É—Å–∫ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ –≤—Ä—É—á–Ω—É—é

```bash
docker run -d \
  --name cerera-node \
  -p 1337:1337 \
  -p 31000:31000 \
  -v $(pwd)/cerera-data:/app/data \
  --restart unless-stopped \
  cerera:latest
```

## üöÄ –î–µ–ø–ª–æ–π –Ω–∞ —Å–µ—Ä–≤–µ—Ä

### –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Å–∫—Ä–∏–ø—Ç–∞ deploy.sh

```bash
./ci-cd/deploy.sh user@server-ip
```

### –†—É—á–Ω–æ–π –¥–µ–ø–ª–æ–π

–°–º. –ø–æ–¥—Ä–æ–±–Ω—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤ [DEPLOYMENT.md](./DEPLOYMENT.md)

## üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ docker-compose:
- **Prometheus**: http://localhost:9090
- **Grafana**: http://localhost:3100 (admin/admin)

## üìù –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- Dockerfile –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è –∏–∑ –∫–æ—Ä–Ω—è –ø—Ä–æ–µ–∫—Ç–∞ (–∏—Å–ø–æ–ª—å–∑—É–µ—Ç `COPY . .`)
- docker-compose.yml –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –æ—Ç–Ω–æ—Å–∏—Ç–µ–ª—å–Ω—ã–µ –ø—É—Ç–∏ –∫ –ø–∞–ø–∫–µ grafana –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞
- prometheus.yml –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –≤ —ç—Ç–æ–π –ø–∞–ø–∫–µ –∏ –º–æ–Ω—Ç–∏—Ä—É–µ—Ç—Å—è –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä

