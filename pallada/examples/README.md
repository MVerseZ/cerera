# Pallada VM - –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–≠—Ç–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—è —Å–æ–¥–µ—Ä–∂–∏—Ç –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã Pallada.

## –ó–∞–ø—É—Å–∫ –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏

### –ö–æ–º–ø–∏–ª—è—Ü–∏—è –∏ –∑–∞–ø—É—Å–∫

```bash
cd internal/pallada/examples
go build -o test_run.exe test_run.go
./test_run.exe
```

–ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é:

```bash
go run test_run.go
```

## –ß—Ç–æ –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è

–î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–æ–Ω–Ω–∞—è –ø—Ä–æ–≥—Ä–∞–º–º–∞ `test_run.go` –≤–∫–ª—é—á–∞–µ—Ç 9 –ø—Ä–∏–º–µ—Ä–æ–≤:

1. **–°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∑–Ω–∞—á–µ–Ω–∏—è –≤ –ø–∞–º—è—Ç—å** - –±–∞–∑–æ–≤–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ MSTORE
2. **–ê—Ä–∏—Ñ–º–µ—Ç–∏—á–µ—Å–∫–∏–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - —Å–ª–æ–∂–µ–Ω–∏–µ (10 + 5)
3. **–£–º–Ω–æ–∂–µ–Ω–∏–µ –∏ –¥–µ–ª–µ–Ω–∏–µ** - –∫–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ (6 * 7 / 2)
4. **–†–∞–±–æ—Ç–∞ —Å storage** - —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –∏–∑ persistent storage
5. **RETURN –¥–∞–Ω–Ω—ã—Ö** - –≤–æ–∑–≤—Ä–∞—Ç –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–∞–º—è—Ç–∏
6. **–°—Ä–∞–≤–Ω–µ–Ω–∏–µ —á–∏—Å–µ–ª** - –æ–ø–µ—Ä–∞—Ü–∏–∏ —Å—Ä–∞–≤–Ω–µ–Ω–∏—è (10 > 5)
7. **–ü–æ–±–∏—Ç–æ–≤—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏** - –ø–æ–±–∏—Ç–æ–≤–æ–µ AND (15 & 3)
8. **REVERT** - –æ—Ç–∫–∞—Ç –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Å –¥–∞–Ω–Ω—ã–º–∏
9. **–ö–æ–º–ø–ª–µ–∫—Å–Ω–æ–µ –≤—ã—Ä–∞–∂–µ–Ω–∏–µ** - –≤—ã—á–∏—Å–ª–µ–Ω–∏–µ ((10 + 5) * 2)

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–∏–º–µ—Ä–∞

–ö–∞–∂–¥—ã–π –ø—Ä–∏–º–µ—Ä –¥–µ–º–æ–Ω—Å—Ç—Ä–∏—Ä—É–µ—Ç:

- –°–æ–∑–¥–∞–Ω–∏–µ –±–∞–π—Ç–∫–æ–¥–∞ –∫–æ–Ω—Ç—Ä–∞–∫—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–π–∫—É –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ó–∞–ø—É—Å–∫ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã
- –ü—Ä–æ–≤–µ—Ä–∫—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –∏ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è –≥–∞–∑–∞

## –ü—Ä–∏–º–µ—Ä –∫–æ–¥–∞

```go
// –ë–∞–π—Ç–∫–æ–¥: PUSH1 10, PUSH1 5, ADD, STOP
code := []byte{
    0x60, 0x0a, // PUSH1 10
    0x60, 0x05, // PUSH1 5
    0x01,       // ADD
    0x00,       // STOP
}

ctx := pallada.NewContextWithStorage(
    types.Address{},
    types.Address{},
    big.NewInt(0),
    nil,
    10000,
    big.NewInt(1),
    blockInfo,
    newMockStorage(),
)

vm := pallada.NewVM(code, ctx)
result, err := vm.Run()
```

## –û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥

–ü—Ä–æ–≥—Ä–∞–º–º–∞ –≤—ã–≤–æ–¥–∏—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–∞–∂–¥–æ–≥–æ –ø—Ä–∏–º–µ—Ä–∞, –≤–∫–ª—é—á–∞—è:

- ‚úÖ –°—Ç–∞—Ç—É—Å –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- ‚õΩ –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω–æ–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –≥–∞–∑–∞
- üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã –æ–ø–µ—Ä–∞—Ü–∏–π
- üìù –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é

## –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ –ø—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç mock storage –¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏
- –ì–∞–∑–æ–≤—ã–µ –ª–∏–º–∏—Ç—ã –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã –¥–ª—è —É—Å–ø–µ—à–Ω–æ–≥–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è
- –ü—Ä–∏–º–µ—Ä—ã –ø–æ–∫–∞–∑—ã–≤–∞—é—Ç –æ—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ VM

–î–ª—è –±–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ —Å–º. [README.md](../README.md) –≤ —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏.
